@page "/orders/{Id:guid}"

@inject OrderService Orders

<h3>Order Details</h3>

@if (order == null)
{
    <p>Loading...</p>
}
else
{
    <p><b>Customer:</b> @order.CustomerName</p>

    <table class="table">

        <thead>
        <tr>
            <th>Product</th>
            <th>Qty</th>
            <th>Price</th>
        </tr>
        </thead>

        <tbody>

        @foreach (var item in order.Items)
        {
            <tr>
                <td>@item.ProductId</td>
                <td>@item.Quantity</td>
                <td>@item.Price</td>
            </tr>
        }

        </tbody>

    </table>

    <p>Subtotal: @order.Subtotal</p>
    <p>Discount: @order.Discount</p>
    <p>Total: @order.Total</p>
}

@code {

    [Parameter]
    public Guid Id { get; set; }

    OrderDto? order;

    protected override async Task OnInitializedAsync()
    {
        order = await Orders.Get(Id);
    }

}